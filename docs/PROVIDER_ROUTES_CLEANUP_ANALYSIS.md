# Provider è·¯ç”±æ¸…ç†åˆ†æ

**åˆ›å»ºæ—¶é—´**ï¼š2026-01-03
**é—®é¢˜**ï¼šå‰ç«¯æ“ä½œå¤±è´¥ï¼ŒæŠ¥é”™ "Provider not found"
**æ ¹æœ¬åŸå› **ï¼šæ—§ `/api/providers/*` è·¯ç”±ä»åœ¨å°è¯•è®¿é—®å·²åºŸå¼ƒçš„ `providerPools[providerType]` æ•°æ®ç»“æ„

---

## ğŸ“Š æ—§è·¯ç”±åˆ†æç»“æœ

| æ—§è·¯ç”± | è¡Œå· | åŠŸèƒ½ | æ–°è·¯ç”±æ›¿ä»£ | å¯åˆ é™¤ï¼Ÿ | åŸå›  |
|--------|------|------|-----------|---------|------|
| `PUT /api/providers/:type/:uuid` | 2053-2149 | æ›´æ–° provider é…ç½® | âŒ æ—  | **å¦** | æ–° API ç¼ºå°‘æ›´æ–°åŠŸèƒ½ |
| `DELETE /api/providers/:type/:uuid` | 2151-2256 | åˆ é™¤å¹¶æ¸…ç† token æ–‡ä»¶ | âš ï¸ éƒ¨åˆ† | **å¦** | æ–° API ç¼ºå°‘ token æ¸…ç† |
| `POST /api/providers/batch-delete` | 2258-2404 | æ‰¹é‡åˆ é™¤ + token æ¸…ç† | âš ï¸ éƒ¨åˆ† | **å¦** | æ–° API ç¼ºå°‘ token æ¸…ç† |
| `POST /api/providers/:type/:uuid/disable` | 2406-2480 | æ˜¾å¼ç¦ç”¨/å¯ç”¨ | âš ï¸ éƒ¨åˆ† | **å¦** | æ–° API åªæ”¯æŒ toggle |
| `POST /api/providers/:type/:uuid/enable` | 2406-2480 | æ˜¾å¼ç¦ç”¨/å¯ç”¨ | âš ï¸ éƒ¨åˆ† | **å¦** | æ–° API åªæ”¯æŒ toggle |
| `POST /api/providers/:type/:uuid/toggle` | 2556-2606 | åˆ‡æ¢çŠ¶æ€ï¼ˆæ”¯æŒæ˜¾å¼è®¾ç½®ï¼‰ | âš ï¸ éƒ¨åˆ† | **å¦** | æ–° API ä¸æ”¯æŒæ˜¾å¼è®¾ç½® |
| `POST /api/providers/:type/:uuid/health-check` | 2608-2682 | å•è´¦å·å¥åº·æ£€æŸ¥ | âœ… 1587-1622 | **æ˜¯** | åŠŸèƒ½å®Œå…¨ç­‰ä»· |
| `POST /api/providers/:type/:uuid/reset-health` | 2684-2752 | é‡ç½®å¥åº·çŠ¶æ€ | âœ… 1630-1658 | **æ˜¯** | åŠŸèƒ½å®Œå…¨ç­‰ä»· |
| `POST /api/providers/:type/:uuid/test` | 2755-2828 | æµ‹è¯•è´¦å· | âœ… 1661-1688 | **æ˜¯** | åŠŸèƒ½å®Œå…¨ç­‰ä»· |

---

## ğŸ¯ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šå¿«é€Ÿä¿®å¤ï¼ˆæ¨èï¼‰

**ç›®æ ‡**ï¼šè®©æ—§è·¯ç”±èƒ½å¤Ÿè®¿é—®æ–°çš„ accounts æ•°æ®ç»“æ„ï¼Œé¿å… "Provider not found" é”™è¯¯

**å®æ–½æ­¥éª¤**ï¼š
1. ä¿®æ”¹æ—§è·¯ç”±ä¸­çš„æ•°æ®è®¿é—®é€»è¾‘ï¼š
   - å°† `providerPools[providerType]` æ”¹ä¸º `accountPool.accounts`
   - ä¿æŒå…¶ä»–é€»è¾‘ä¸å˜ï¼ˆåŒ…æ‹¬ token æ¸…ç†ã€æ˜¾å¼ enable/disable ç­‰ï¼‰

2. åˆ é™¤å·²æœ‰å®Œå…¨æ›¿ä»£çš„è·¯ç”±ï¼š
   - `POST /api/providers/:type/:uuid/health-check`
   - `POST /api/providers/:type/:uuid/reset-health`
   - `POST /api/providers/:type/:uuid/test`

**ä¼˜ç‚¹**ï¼š
- âœ… å¿«é€Ÿè§£å†³å½“å‰é”™è¯¯
- âœ… ä¿ç•™æ‰€æœ‰åŠŸèƒ½ï¼ˆtoken æ¸…ç†ã€æ˜¾å¼æ§åˆ¶ç­‰ï¼‰
- âœ… é£é™©æœ€ä½
- âœ… ä¸éœ€è¦ä¿®æ”¹å‰ç«¯

**ç¼ºç‚¹**ï¼š
- âš ï¸ ä¿ç•™äº†æ—§è·¯ç”±ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬

**å·¥ä½œé‡**ï¼š1-2 å°æ—¶

---

### æ–¹æ¡ˆ Bï¼šå®Œæ•´è¿ç§»ï¼ˆé•¿æœŸæ–¹æ¡ˆï¼‰

**ç›®æ ‡**ï¼šå®Œå…¨ç§»é™¤æ—§è·¯ç”±ï¼Œå°†ç¼ºå¤±åŠŸèƒ½è¡¥å……åˆ°æ–° API

**å®æ–½æ­¥éª¤**ï¼š
1. ä¸ºæ–° `/api/accounts/*` API è¡¥å……ç¼ºå¤±åŠŸèƒ½ï¼š
   - æ·»`PUT /api/accounts/:uuid` - æ›´æ–°è´¦å·é…ç½®
   - åœ¨åˆ é™¤æ“ä½œä¸­æ·»åŠ  token æ–‡ä»¶æ¸…ç†é€»è¾‘
   - ä¸º toggle æ¥å£æ·»åŠ æ˜¾å¼è®¾ç½®æ”¯æŒï¼ˆæ¥å— `isDisabled` å‚æ•°ï¼‰

2. åˆ é™¤æ‰€æœ‰æ—§ `/api/providers/*` è·¯ç”±

3. æ›´æ–°å‰ç«¯ä»£ç ï¼ˆå¦‚æœæœ‰ç›´æ¥è°ƒç”¨æ—§è·¯ç”±çš„åœ°æ–¹ï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… æ¶æ„æ›´æ¸…æ™°
- âœ… å‡å°‘ä»£ç å†—ä½™
- âœ… é•¿æœŸç»´æŠ¤æˆæœ¬ä½

**ç¼ºç‚¹**ï¼š
- âŒ å·¥ä½œé‡å¤§
- âŒ éœ€è¦æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
- âŒ å¯èƒ½éœ€è¦æ›´æ–°å‰ç«¯

**å·¥ä½œé‡**ï¼š4-6 å°æ—¶

---

## ğŸ’¡ æ¨èè¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œï¼šæ–¹æ¡ˆ Aï¼ˆå¿«é€Ÿä¿®å¤ï¼‰

ä¿®æ”¹æ—§è·¯ç”±çš„æ•°æ®è®¿é—®æ–¹å¼ï¼Œè®©å®ƒä»¬èƒ½å¤Ÿæ­£ç¡®è®¿é—®æ–°çš„ accounts ç»“æ„ï¼š

```javascript
// æ—§ä»£ç ï¼ˆä¼šæŠ¥é”™ï¼‰
const providers = providerPools[providerType] || [];

// æ–°ä»£ç ï¼ˆä¿®å¤ï¼‰
const providers = accountPool?.accounts || [];
```

åŒæ—¶åˆ é™¤ 3 ä¸ªå·²æœ‰å®Œå…¨æ›¿ä»£çš„è·¯ç”±ï¼š
- health-check
- reset-health
- test

### åç»­è®¡åˆ’ï¼šæ–¹æ¡ˆ Bï¼ˆå®Œæ•´è¿ç§»å¤ç¨³å®šè¿è¡Œåï¼Œé€æ­¥å®æ–½å®Œæ•´è¿ç§»ï¼š
1. è¡¥å……æ–° API çš„ç¼ºå¤±åŠŸèƒ½
2. æ›´æ–°å‰ç«¯è°ƒç”¨
3. åˆ é™¤æ‰€æœ‰æ—§è·¯ç”±

---

## ğŸ” è¯¦ç»†ä»£ç ä½ç½®

### éœ€è¦ä¿®å¤çš„æ—§è·¯ç”±ï¼ˆæ–¹æ¡ˆ Aï¼‰

1. **PUT /api/providers/:type/:uuid** (2053-2149)
   - ä¿®æ”¹ï¼š`providerPools[providerType]` â†’ `accountPool.accounts`
   - ä¿ç•™ï¼šæ›´æ–°é…ç½®é€»è¾‘

2. **DELETE /api/providers/:type/:uuid** (2151-2256)
   - ä¿®æ”¹ï¼š`providerPools[providerType]` â†’ `accountPool.accounts`
   - ä¿ç•™ï¼štoken æ–‡ä»¶æ¸…ç†é€»è¾‘

3. **POST /api/providers/batch-delete** (2258-2404)
   - ä¿®æ”¹ï¼š`providerPools[providerType]` â†’ `accountPool.accounts`
   - ä¿ç•™ï¼šæ‰¹é‡åˆ é™¤ + token æ¸…ç†é€»è¾‘

4. **POST /api/providers/:type/:uuid/(disable|enable|toggle)** (2406-2606)
   - ä¿®æ”¹ï¼š`providerPools[providerType]` â†’ `accountPool.accounts`
   - ä¿ç•™ï¼šæ˜¾å¼è®¾ç½® isDisabled çš„èƒ½åŠ›

### å¯ä»¥åˆ é™¤çš„æ—§è·¯ç”±ï¼ˆæ–¹æ¡ˆ Aï¼‰

1. **POST /api/providers/:type/:uuid/health-check** (2608-2682)
   - åŸå› ï¼š`POST /api/accounts/:uuid/health-check` å·²å®Œå…¨å®ç°

2. **POST /api/providers/:type/:uuid/reset-health** (2684-2752)
   - åŸå› ï¼š`POST /api/accounts/:uuid/reset-health` å·²å®Œå…¨å®ç°

3. **POST /api/providers/:type/:uuid/test** (2755-2828)
   - åŸå› ï¼š`POST /api/accounts/:uuid/test` å·²å®Œå…¨å®ç°

---

## âš ï¸ é£é™©è¯„ä¼°

### æ–¹æ¡ˆ A é£é™©
- **ä½é£é™©**ï¼šåªä¿®æ”¹æ•°æ®è®¿é—®æ–¹å¼ï¼Œä¸æ”¹å˜ä¸šåŠ¡é€»è¾‘
- **æµ‹è¯•é‡ç‚¹**ï¼š
  - æ›´æ–°è´¦å·é…ç½®
  - åˆ é™¤è´¦å·ï¼ˆéªŒè¯ token æ–‡ä»¶æ¸…ç†ï¼‰
  - æ‰¹é‡åˆ é™¤
  - ç¦ç”¨/å¯ç”¨è´¦å·

### æ–¹æ¡ˆ B é£é™©
- **ä¸­ç­‰é£é™©**ï¼šéœ€è¦é‡æ–°å®ç°éƒ¨åˆ†åŠŸèƒ½
- **æµ‹è¯•é‡ç‚¹**ï¼š
  - æ‰€æœ‰è´¦å·ç®¡ç†æ“ä½œ
  - å‰ç«¯æ‰€æœ‰ç›¸å…³é¡µé¢
  - token æ–‡ä»¶æ¸…ç†æœºåˆ¶
  - å¤šå®ä¾‹ç¯å¢ƒä¸‹çš„è¡Œä¸º

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æœ€åæ›´æ–°**ï¼š2026-01-03
**çŠ¶æ€**ï¼šå¾…å®æ–½
