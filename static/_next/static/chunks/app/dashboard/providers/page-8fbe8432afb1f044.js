(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{7675:function(e,s,t){Promise.resolve().then(t.bind(t,4258))},4258:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var a=t(7437),r=t(2265),l=t(1843),n=t(6695),i=t(3243);let c=(0,i.Z)("outline","heartbeat","Heartbeat",[["path",{d:"M19.5 13.572l-7.5 7.428l-2.896 -2.868m-6.117 -8.104a5 5 0 0 1 9.013 -3.022a5 5 0 1 1 7.5 6.572",key:"svg-0"}],["path",{d:"M3 13h2l2 3l2 -6l1 3h3",key:"svg-1"}]]);var o=t(7406);let d=(0,i.Z)("outline","link","Link",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]);var x=t(2596),h=t(6393),m=t(1443);let u=(0,i.Z)("outline","user","User",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);var g=t(1695),p=t(1865);let b=(0,i.Z)("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);var j=t(9740);let f=(0,i.Z)("outline","mail","Mail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);var v=t(2877);let y=(0,i.Z)("outline","chevron-right","ChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),N=(0,i.Z)("outline","clipboard","Clipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]),w=(0,i.Z)("outline","copy","Copy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]),k=(0,i.Z)("outline","external-link","ExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);var C=t(4810),S=t(5974),T=t(3149),Z=t(3022),E=t(1343);let M=async(e,s)=>{try{var t;if(!e)return s;let a=await e.clone().json();if(null==a?void 0:null===(t=a.error)||void 0===t?void 0:t.message)return a.error.message;if(null==a?void 0:a.message)return a.message}catch(e){}return s};function _(){var e,s,t,i,_,A,O;let F=(0,T.p)(),[I,P]=(0,r.useState)({}),[z,D]=(0,r.useState)(null),[W,H]=(0,r.useState)("all"),[R,J]=(0,r.useState)(!0),[U,L]=(0,r.useState)(!1),[B,K]=(0,r.useState)("claude-kiro-oauth"),[q,G]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(!1),[$,ee]=(0,r.useState)(!1),[es,et]=(0,r.useState)(null),[ea,er]=(0,r.useState)(!1),[el,en]=(0,r.useState)(""),[ei,ec]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!ea||!ei)return;let e=setInterval(async()=>{try{let s=await (0,E.ri)("/api/kiro/oauth/check-state?state=".concat(ei));if(s.ok){let t=await s.json();t.completed&&(clearInterval(e),er(!1),F.success("授权成功！","账号 #".concat(t.accountNumber||""," 已添加")),await ey())}}catch(e){if((0,E.TW)(e))return;console.warn("Polling auth state failed:",e)}},2e3);return()=>clearInterval(e)},[ea,ei]);let[eo,ed]=(0,r.useState)(null),[ex,eh]=(0,r.useState)(null),[em,eu]=(0,r.useState)(null),[eg,ep]=(0,r.useState)(null),[eb,ej]=(0,r.useState)(new Set),[ef,ev]=(0,r.useState)(!1);(0,r.useEffect)(()=>{ey()},[]);let ey=async()=>{L(!0);let e=Date.now();try{let e=await (0,E.ri)("/api/accounts");if(!e.ok){let s=await M(e,"加载提供商失败");throw Error(s)}let s=await e.json();s._accountPoolStats&&D(s._accountPoolStats);let t=Array.isArray(s.accounts)?s.accounts:[];P({"claude-kiro-oauth":t})}catch(e){if((0,E.TW)(e))return;console.error("Failed to load providers:",e),F.error("加载提供商失败",e instanceof Error?e.message:void 0)}finally{let s=Date.now()-e;s<800&&await new Promise(e=>setTimeout(e,800-s)),J(!1),L(!1)}},eN=async e=>{"banned"===e?V(!0):G(!0);try{let s=await (0,E.ri)("/api/accounts/health-check",{method:"POST",headers:{"Content-Type":"application/json"},body:e?JSON.stringify({pool:e}):void 0});if(!s.ok){let e=await M(s,"健康检查失败");throw Error(e)}let t=await s.json();await ey(),F.success("".concat("banned"===e?"异常池":"checking"===e?"检查池":"","健康检查完成"),"".concat(t.successCount," 个恢复健康, ").concat(t.failCount," 个仍异常"))}catch(e){if((0,E.TW)(e))return;console.error("Batch health check failed:",e),F.error("健康检查失败",e instanceof Error?e.message:void 0)}finally{G(!1),V(!1)}},ew=async()=>{if(confirm("确定要重置所有账号的健康状态吗？")){Y(!0);try{let e=await (0,E.ri)("/api/accounts/reset-health",{method:"POST"});if(!e.ok){let s=await M(e,"重置失败");throw Error(s)}let s=await e.json();await ey(),F.success("重置成功",s.message||"健康状态已重置")}catch(e){if((0,E.TW)(e))return;console.error("Reset health failed:",e),F.error("重置失败",e instanceof Error?e.message:void 0)}finally{Y(!1)}}},[ek,eC]=(0,r.useState)(!1),[eS,eT]=(0,r.useState)(!1),[eZ,eE]=(0,r.useState)(!1),[eM,e_]=(0,r.useState)(1),[eA,eO]=(0,r.useState)(""),[eF,eI]=(0,r.useState)(""),[eP,ez]=(0,r.useState)("https://view.awsapps.com/start"),[eD,eW]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!eZ||!eD)return;let e=new EventSource("/api/events");return e.addEventListener("oauth_success",e=>{try{let s=JSON.parse(e.data);"claude-kiro-oauth-builderid"===s.provider&&(eE(!1),eW(null),F.success("AWS 授权成功！","Token 已保存: ".concat(s.credPath)),ey())}catch(e){console.error("Failed to parse oauth_success event:",e)}}),e.addEventListener("oauth_error",e=>{try{let s=JSON.parse(e.data);"claude-kiro-oauth-builderid"===s.provider&&(F.error("AWS 授权失败",s.error||"未知错误"),eW(null))}catch(e){console.error("Failed to parse oauth_error event:",e)}}),e.onerror=()=>{console.warn("SSE connection error")},()=>{e.close()}},[eZ,eD]);let eH=async()=>{let e=I[B]||[],s=0;for(let t of e){let e=(t.KIRO_OAUTH_CREDS_FILE_PATH||"").match(/kiro-auth-token-(\d+)\.json/);if(e){let t=parseInt(e[1],10);t>s&&(s=t)}}e_(s+1),eC(!0)},eR=async()=>{if(!eA.trim()){F.error("请输入 RefreshToken");return}if(!eA.startsWith("aorAAAAAG")){F.error("RefreshToken 格式不正确，应该以 aorAAAAAG 开头");return}ee(!0);try{let e=await (0,E.ri)("/api/kiro/oauth/manual-import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:eA,profileArn:eF,accountNumber:eM})});if(!e.ok){let s=await M(e,"导入失败");throw Error(s)}F.success("导入成功","RefreshToken 已保存"),eT(!1),eO(""),eI(""),await ey()}catch(e){if((0,E.TW)(e))return;console.error("Manual import failed:",e),F.error("导入失败",e instanceof Error?e.message:void 0)}finally{ee(!1)}},eJ=async()=>{ee(!0),eW(null);try{let e=await (0,E.ri)("/api/kiro/oauth/aws-sso/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountNumber:eM,startUrl:eP})});if(!e.ok){let s=await M(e,"启动失败");throw Error(s)}let s=await e.json();s.success?(eW(s),F.success("设备授权已启动","请在浏览器中完成授权")):F.error("启动失败",s.error||"未知错误")}catch(e){if((0,E.TW)(e))return;console.error("AWS device auth failed:",e),F.error("启动设备授权失败",e instanceof Error?e.message:void 0)}finally{ee(!1)}},eU=async(e,s,t)=>{try{let e=await (0,E.ri)("/api/accounts/".concat(s,"/toggle"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isDisabled:!t})});if(!e.ok){let s=await M(e,"更新失败");throw Error(s)}await ey(),F.success("状态已更新",t?"账号已启用":"账号已禁用")}catch(e){if((0,E.TW)(e))return;console.error("Failed to toggle account:",e),F.error("更新失败",e instanceof Error?e.message:void 0)}},eL=async(e,s)=>{ed(s);try{let e=await (0,E.ri)("/api/accounts/".concat(s,"/health-check"),{method:"POST"});if(!e.ok){let s=await M(e,"健康检查失败");throw Error(s)}let t=await e.json();await ey(),t.isHealthy?F.success("账号健康",t.modelName?"模型: ".concat(t.modelName):void 0):F.warning("账号异常",t.error||void 0)}catch(e){if((0,E.TW)(e))return;console.error("Health check failed:",e),F.error("健康检查失败",e instanceof Error?e.message:void 0)}finally{ed(null)}},eB=async(e,s)=>{eh(s);try{let e=await (0,E.ri)("/api/accounts/".concat(s,"/test"),{method:"POST"});if(!e.ok){let s=await M(e,"测试失败");throw Error(s)}let t=await e.json();await ey(),t.success?F.success("测试成功",t.message||"账号正常"):F.error("测试失败",t.error||"未知错误")}catch(e){if((0,E.TW)(e))return;console.error("Test failed:",e),F.error("测试失败",e instanceof Error?e.message:void 0)}finally{eh(null)}},eK=async(e,s)=>{eu(s);try{let e=await (0,E.ri)("/api/accounts/".concat(s,"/reset-health"),{method:"POST"});if(!e.ok){let s=await M(e,"重置失败");throw Error(s)}await ey(),F.success("重置成功","健康状态已重置")}catch(e){if((0,E.TW)(e))return;console.error("Reset failed:",e),F.error("重置失败",e instanceof Error?e.message:void 0)}finally{eu(null)}},eq=async(e,s,t)=>{if(confirm("确定要删除账号 #".concat(t+1," 吗？\n\n该操作将同时删除对应的 token 文件，且不可恢复！"))){ep(s);try{let e=await (0,E.ri)("/api/accounts/".concat(s),{method:"DELETE"});if(!e.ok){let s=await M(e,"删除失败");throw Error(s)}await ey(),F.success("删除成功","账号 #".concat(t+1," 已删除"))}catch(e){if((0,E.TW)(e))return;console.error("Delete failed:",e),F.error("删除失败",e instanceof Error?e.message:void 0)}finally{ep(null)}}},eG=async()=>{if(0===eb.size){F.warning("请先选择账号");return}let e=eb.size;if(confirm("确定要删除选中的 ".concat(e," 个账号吗？\n\n该操作将同时删除对应的 token 文件，且不可恢复！"))){ev(!0);try{let e=await (0,E.ri)("/api/accounts/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuids:Array.from(eb)})});if(!e.ok){let s=await M(e,"批量删除失败");throw Error(s)}let s=await e.json();ej(new Set),await ey(),F.success("批量删除成功",s.message)}catch(e){if((0,E.TW)(e))return;console.error("Batch delete failed:",e),F.error("批量删除失败",e instanceof Error?e.message:void 0)}finally{ev(!1)}}},eQ=async e=>{let s=e.map(e=>{switch(e){case"banned":return"封禁";case"quota_exceeded":return"额度用尽";case"expired":return"过期";default:return e}}).join("/");if(confirm("确定要删除所有 ".concat(s," 的账号吗？\n\n该操作将同时删除对应的 token 文件，且不可恢复！"))){ev(!0);try{let s=await (0,E.ri)("/api/accounts/batch-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleteByStatus:e})});if(!s.ok){let e=await M(s,"批量删除失败");throw Error(e)}let t=await s.json();ej(new Set),await ey(),F.success("批量删除成功",t.message)}catch(e){if((0,E.TW)(e))return;console.error("Batch delete by status failed:",e),F.error("批量删除失败",e instanceof Error?e.message:void 0)}finally{ev(!1)}}},eV=e=>{let s=new Set(eb);s.has(e)?s.delete(e):s.add(e),ej(s)},eX=e=>{if(!e||"ok"===e.statusType)return null;let s={banned:{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"},quota_exceeded:{bg:"bg-orange-500/20",text:"text-orange-400",border:"border-orange-500/30"},expired:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"},rate_limit:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30"},server_error:{bg:"bg-purple-500/20",text:"text-purple-400",border:"border-purple-500/30"},network_error:{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-500/30"},unknown:{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-500/30"}};return{...s[e.statusType]||s.unknown,status:e.status,message:e.message}},eY=e=>e?new Date(e).toLocaleString("zh-CN"):"--",e$=e=>{if(!e)return"--";let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3),a=Math.floor(t/60),r=Math.floor(a/60),l=Math.floor(r/24);return l>0?"".concat(l,"天前"):r>0?"".concat(r,"小时前"):a>0?"".concat(a,"分钟前"):"".concat(t,"秒前")},e0=Object.keys(I),e1=I[B]||[],e2=e1.length,e4=e1.filter(e=>e.isHealthy).length,e5=e1.reduce((e,s)=>e+s.usageCount,0),e6=e1.reduce((e,s)=>e+s.errorCount,0),e3=e=>e.isDisabled||!e.isHealthy?"banned":e.errorCount>0&&e.isHealthy?"checking":"healthy",e7=e=>{switch(e){case"healthy":return{text:"健康池",className:"bg-green-500/20 text-green-400 border-green-500/30"};case"checking":return{text:"检查池",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"};case"banned":return{text:"异常池",className:"bg-red-500/20 text-red-400 border-red-500/30"}}},e8="all"===W?e1:e1.filter(e=>e3(e)===W);return R?(0,a.jsx)(Z.y6,{}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between animate-fade-in-up",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"提供商池管理"}),(0,a.jsx)("p",{className:"text-gray-400",children:"管理和监控多账号池"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("button",{onClick:ey,disabled:U,className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-all disabled:opacity-50",children:[U?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:U?"刷新中...":"刷新"})]})})]}),(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>eN(),disabled:q,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg font-medium transition-all disabled:opacity-50",children:[q?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(c,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:q?"检测中...":"批量健康检测"})]}),(0,a.jsxs)("button",{onClick:()=>eN("banned"),disabled:Q,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 rounded-lg font-medium transition-all disabled:opacity-50",title:"重新检测异常池中的账号，看是否有误判或已恢复的账号",children:[Q?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:Q?"检测中...":"检查异常池"})]}),(0,a.jsxs)("button",{onClick:ew,disabled:X,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 rounded-lg font-medium transition-all disabled:opacity-50",children:[X?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:X?"重置中...":"重置健康状态"})]}),(0,a.jsxs)("button",{onClick:eH,disabled:$,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 rounded-lg font-medium transition-all disabled:opacity-50",children:[$?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(d,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:$?"生成中...":"生成授权"})]}),(0,a.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,a.jsxs)("button",{onClick:eG,disabled:ef||0===eb.size,className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 border border-red-500/30 hover:bg-red-500/30 text-red-400 rounded-lg font-medium transition-all disabled:opacity-50",children:[ef?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["删除选中 (",eb.size,")"]})]}),(0,a.jsxs)("button",{onClick:()=>eQ(["banned","quota_exceeded"]),disabled:ef,className:"flex items-center gap-2 px-4 py-2 bg-orange-500/20 border border-orange-500/30 hover:bg-orange-500/30 text-orange-400 rounded-lg font-medium transition-all disabled:opacity-50",title:"删除所有封禁和额度用尽的账号",children:[ef?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"清理异常账号"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,a.jsx)("div",{className:"animate-scale-in delay-100",children:(0,a.jsx)("div",{onClick:()=>H("healthy"===W?"all":"healthy"),className:"cursor-pointer transition-all ".concat("healthy"===W?"ring-2 ring-green-500 rounded-xl":""),children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"健康池"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-green-400",children:null!==(e=null==z?void 0:z.healthy)&&void 0!==e?e:e4})]})]})})})}),(0,a.jsx)("div",{className:"animate-scale-in delay-150",children:(0,a.jsx)("div",{onClick:()=>H("checking"===W?"all":"checking"),className:"cursor-pointer transition-all ".concat("checking"===W?"ring-2 ring-yellow-500 rounded-xl":""),children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-600 flex items-center justify-center",children:(0,a.jsx)(c,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"检查池"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-yellow-400",children:null!==(s=null==z?void 0:z.checking)&&void 0!==s?s:0})]})]})})})}),(0,a.jsx)("div",{className:"animate-scale-in delay-200",children:(0,a.jsx)("div",{onClick:()=>H("banned"===W?"all":"banned"),className:"cursor-pointer transition-all ".concat("banned"===W?"ring-2 ring-red-500 rounded-xl":""),children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-pink-600 flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"异常池"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-red-400",children:null!==(t=null==z?void 0:z.banned)&&void 0!==t?t:0})]})]})})})}),(0,a.jsx)("div",{className:"animate-scale-in delay-250",children:(0,a.jsx)("div",{onClick:()=>H("all"),className:"cursor-pointer transition-all ".concat("all"===W?"ring-2 ring-blue-500 rounded-xl":""),children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"总账户"}),(0,a.jsx)("h3",{className:"text-xl font-bold",children:null!==(i=null==z?void 0:z.total)&&void 0!==i?i:e2})]})]})})})}),(0,a.jsx)("div",{className:"animate-scale-in delay-300",children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"缓存命中"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-cyan-400",children:null!==(_=null==z?void 0:z.cacheHitRate)&&void 0!==_?_:"0%"})]})]})})}),(0,a.jsx)("div",{className:"animate-scale-in delay-350",children:(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:"使用/错误"}),(0,a.jsxs)("h3",{className:"text-lg font-bold",children:[(0,a.jsx)("span",{className:"text-green-400",children:null!==(A=null==z?void 0:z.totalUsageCount)&&void 0!==A?A:e5}),(0,a.jsx)("span",{className:"text-gray-500",children:"/"}),(0,a.jsx)("span",{className:"text-red-400",children:null!==(O=null==z?void 0:z.totalErrorCount)&&void 0!==O?O:e6})]})]})]})})})]}),(0,a.jsx)("div",{className:"flex gap-4 border-b border-white/10 overflow-x-auto",children:e0.map(e=>{let s=I[e]||[],t=s.filter(e=>e.isHealthy).length;return(0,a.jsxs)("button",{onClick:()=>K(e),className:"px-4 py-3 font-medium transition-all whitespace-nowrap ".concat(B===e?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:[e,(0,a.jsxs)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-white/10",children:[t,"/",s.length]})]},e)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[e8.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4 px-4 py-2 bg-white/5 rounded-lg border border-white/10",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:eb.size===e8.length&&e8.length>0,onChange:()=>{eb.size===e8.length?ej(new Set):ej(new Set(e8.map(e=>e.uuid)))},className:"w-4 h-4 rounded border-white/20 bg-white/5 text-blue-500 focus:ring-blue-500 focus:ring-offset-0"}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["全选 (",eb.size,"/",e8.length,")"]})]}),eb.size>0&&(0,a.jsxs)("span",{className:"text-sm text-blue-400",children:["已选中 ",eb.size," 个账号"]})]}),0===e8.length?(0,a.jsx)(C.J,{children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-gray-400 text-lg",children:"all"===W?"暂无账号":"".concat("healthy"===W?"健康池":"checking"===W?"检查池":"异常池","暂无账号")}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"all"!==W&&(0,a.jsx)("button",{onClick:()=>H("all"),className:"text-blue-400 hover:underline",children:"查看全部账号"})})]})}):e8.map((e,s)=>{let t=e7(e3(e)),r=e1.findIndex(s=>s.uuid===e.uuid),i=eX(e.errorStatus),d=eb.has(e.uuid);return(0,a.jsx)(C.J,{className:d?"ring-2 ring-blue-500":"",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:d,onChange:()=>eV(e.uuid),className:"w-5 h-5 rounded border-white/20 bg-white/5 text-blue-500 focus:ring-blue-500 focus:ring-offset-0 cursor-pointer"}),(0,a.jsxs)("h3",{className:"text-xl font-bold",children:["账号 #",r+1]}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full border ".concat(t.className),children:t.text}),i&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full border ".concat(i.bg," ").concat(i.text," ").concat(i.border),title:i.message,children:i.status}),e.isDisabled&&(0,a.jsxs)(S.C,{variant:"outline",children:[(0,a.jsx)(p.Z,{className:"w-3 h-3 mr-1"}),"已禁用"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>eB(B,e.uuid),disabled:ex===e.uuid,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 transition-all disabled:opacity-50",title:"测试账号",children:[ex===e.uuid?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(b,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"测试"})]}),(0,a.jsxs)("button",{onClick:()=>eL(B,e.uuid),disabled:eo===e.uuid,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transition-all disabled:opacity-50",title:"健康检查",children:[eo===e.uuid?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(c,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"检测"})]}),(0,a.jsxs)("button",{onClick:()=>eK(B,e.uuid),disabled:em===e.uuid,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 transition-all disabled:opacity-50",title:"重置健康状态",children:[em===e.uuid?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"重置"})]}),(0,a.jsx)("button",{onClick:()=>eU(B,e.uuid,e.isDisabled),className:"px-3 py-1.5 text-sm rounded-lg border border-white/10 hover:bg-white/5 transition-colors",title:e.isDisabled?"启用账号":"禁用账号",children:e.isDisabled?(0,a.jsx)(j.Z,{className:"w-4 h-4"}):(0,a.jsx)(p.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>eq(B,e.uuid,s),disabled:eg===e.uuid,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg bg-red-500/20 border border-red-500/30 hover:bg-red-500/30 text-red-400 transition-all disabled:opacity-50",title:"删除账号",children:eg===e.uuid?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.cachedEmail&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:[(0,a.jsx)(f,{className:"w-5 h-5 text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"邮箱"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.cachedEmail})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"使用次数"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.usageCount})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"错误次数"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.errorCount})]})]}),e.lastUsed&&(0,a.jsx)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"最后使用"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e$(e.lastUsed)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:eY(e.lastUsed)})]})}),e.lastHealthCheckTime&&(0,a.jsx)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"最后健康检查"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e$(e.lastHealthCheckTime)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:eY(e.lastHealthCheckTime)})]})}),e.lastErrorTime&&(0,a.jsx)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"最后错误"}),(0,a.jsx)("p",{className:"text-sm font-medium text-red-400",children:e$(e.lastErrorTime)}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:eY(e.lastErrorTime)})]})})]}),e.lastErrorMessage&&(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat(i?"".concat(i.bg," ").concat(i.border):"bg-red-500/10 border-red-500/20"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"错误信息"}),i&&(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat(i.bg," ").concat(i.text," ").concat(i.border),children:i.status})]}),(0,a.jsx)("p",{className:"text-sm font-medium ".concat((null==i?void 0:i.text)||"text-red-400"),children:(null==i?void 0:i.message)||e.lastErrorMessage}),i&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-mono",children:e.lastErrorMessage})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.KIRO_OAUTH_CREDS_FILE_PATH&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"凭据文件路径"}),(0,a.jsx)("p",{className:"text-sm font-mono text-gray-300",children:e.KIRO_OAUTH_CREDS_FILE_PATH})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-400 mb-1",children:["UUID: ",(0,a.jsx)("span",{className:"text-sm text-gray-300 font-mono",children:e.uuid})]}),(0,a.jsxs)("div",{children:[e.checkModelName&&(0,a.jsxs)("div",{style:{display:"inline"},children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:"检查模型:"})," ",(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.checkModelName})]}),e.lastHealthCheckModel&&(0,a.jsxs)("div",{style:{display:"inline"},children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:"最后检查模型:"})," ",(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.lastHealthCheckModel})]})]})]})]})]})},e.uuid)})]}),ek&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-[fadeIn_0.2s_ease-out]",onClick:()=>eC(!1),children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-white/10 max-w-lg w-full overflow-hidden animate-[slideUp_0.3s_ease-out]",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-blue-400"}),"Kiro OAuth 授权"]}),(0,a.jsx)("button",{onClick:()=>eC(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"请选择登录方式："}),(0,a.jsxs)("button",{onClick:()=>{eC(!1),eE(!0)},disabled:$,className:"w-full p-4 rounded-lg border border-white/10 bg-white/5 hover:bg-white/10 transition-all flex items-center gap-4 text-left group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-[#232f3e] flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-[#FF9900]",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.264-.168.312a.52.52 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.415-.287-.806-.415l-1.157-.36c-.583-.183-1.013-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold",children:"AWS Builder ID 登录"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"使用 AWS IAM Identity Center（自动注册Client）"})]}),(0,a.jsx)(y,{className:"w-5 h-5 text-gray-500 group-hover:text-white transition-colors"})]}),(0,a.jsxs)("button",{onClick:()=>{eC(!1),eT(!0)},disabled:$,className:"w-full p-4 rounded-lg border-2 border-green-500/50 bg-gradient-to-r from-green-500/10 to-emerald-500/10 hover:from-green-500/20 hover:to-emerald-500/20 transition-all flex items-center gap-4 text-left group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center",children:(0,a.jsx)(N,{className:"w-5 h-5 text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-green-400",children:"手动导入 RefreshToken"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"直接粘贴 refreshToken，无需 OAuth 授权（推荐）"})]}),(0,a.jsx)(y,{className:"w-5 h-5 text-gray-500 group-hover:text-green-400 transition-colors"})]}),(0,a.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-white/5 border border-white/10",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"账号编号："}),(0,a.jsx)("input",{type:"number",min:"1",value:eM,onChange:e=>e_(parseInt(e.target.value)||1),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Token 文件名: kiro-auth-token-",eM,".json"]})]})]})]})}),eS&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-[fadeIn_0.2s_ease-out]",onClick:()=>eT(!1),children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-white/10 max-w-xl w-full overflow-hidden animate-[slideUp_0.3s_ease-out]",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(N,{className:"w-5 h-5 text-green-400"}),"手动导入 RefreshToken"]}),(0,a.jsx)("button",{onClick:()=>eT(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"p-4 rounded-lg bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-green-400",children:"推荐方式 - 无需 OAuth 授权"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-400 mt-2 space-y-1",children:[(0,a.jsx)("li",{children:"• 直接粘贴 refreshToken，系统自动保存"}),(0,a.jsx)("li",{children:"• 永久有效，后端自动刷新 accessToken"}),(0,a.jsx)("li",{children:"• 无需每次浏览器授权，无需无痕模式"})]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["RefreshToken ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("textarea",{value:eA,onChange:e=>eO(e.target.value),placeholder:"粘贴 refreshToken (以 aorAAAAAG 开头...)",rows:4,className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono text-sm resize-none"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"从 Kiro IDE 流量拦截或朋友处获取"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["ProfileArn ",(0,a.jsx)("span",{className:"text-gray-500",children:"(可选)"})]}),(0,a.jsx)("input",{type:"text",value:eF,onChange:e=>eI(e.target.value),placeholder:"arn:aws:codewhisperer:us-east-1:...",className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"可选，系统会自动获取"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"账号编号: "}),(0,a.jsx)("span",{className:"font-bold text-lg",children:eM}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Token 文件: kiro-auth-token-",eM,".json"]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-gradient-to-r from-green-500/5 to-emerald-500/5 border border-green-500/20",children:[(0,a.jsx)("div",{className:"font-medium text-green-400 mb-2",children:"如何获取 RefreshToken？"}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsx)("div",{className:"font-medium text-white mb-1",children:"最简单：从已有账号复制"}),(0,a.jsx)("p",{children:"如果你或朋友已有 Kiro 账号，直接打开 token 文件"}),(0,a.jsxs)("p",{className:"mt-1",children:["文件位置: ",(0,a.jsx)("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-xs",children:"configs/kiro/kiro-auth-token-*.json"})]}),(0,a.jsxs)("p",{className:"mt-1",children:["复制其中的 ",(0,a.jsx)("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-xs",children:"refreshToken"})," 字段即可！"]})]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-white/10 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>eT(!1),className:"px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:"取消"}),(0,a.jsxs)("button",{onClick:eR,disabled:$,className:"px-6 py-2 rounded-lg bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 font-semibold transition-all disabled:opacity-50 flex items-center gap-2",children:[$?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"导入并保存"]})]})]})}),eZ&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-[fadeIn_0.2s_ease-out]",onClick:()=>eE(!1),children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-white/10 max-w-xl w-full overflow-hidden animate-[slideUp_0.3s_ease-out]",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-[#FF9900]",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.375 6.18 6.18 0 0 1-.248-.471c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103-.295.072-.583.16-.862.272a2.287 2.287 0 0 1-.28.104.488.488 0 0 1-.127.023c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.28a.597.597 0 0 1 .224-.167c.279-.144.614-.264 1.005-.36a4.84 4.84 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586z"})}),"AWS Builder ID 授权"]}),(0,a.jsx)("button",{onClick:()=>eE(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"p-4 rounded-lg bg-[#232f3e] border border-[#FF9900]/30",children:(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"账号编号:"})," ",(0,a.jsx)("span",{className:"font-bold",children:eM})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Token文件:"})," ",(0,a.jsxs)("code",{className:"text-xs bg-white/10 px-1.5 py-0.5 rounded",children:["kiro-auth-token-",eM,".json"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"认证方式:"})," ",(0,a.jsx)("span",{className:"font-bold",children:"AWS IAM Identity Center (BuilderId)"})]})]})}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-gradient-to-r from-[#FF9900]/10 to-[#ec7211]/10 border border-[#FF9900]/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(b,{className:"w-4 h-4 text-[#FF9900]"}),(0,a.jsx)("span",{className:"text-[#FF9900] font-medium",children:"自动注册模式"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"系统会自动调用 AWS SSO OIDC API 注册客户端，无需手动输入 Client ID 和 Client Secret！"})]}),!eD&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Start URL ",(0,a.jsx)("span",{className:"text-gray-500",children:"(可选，通常使用默认值即可)"})]}),(0,a.jsx)("input",{type:"text",value:eP,onChange:e=>ez(e.target.value),placeholder:"默认: https://view.awsapps.com/start",className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF9900]"})]}),eD&&(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/30 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-medium",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"设备授权已启动"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"用户码:"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-center text-[#FF9900] tracking-widest font-mono p-4 rounded-lg bg-white/5",children:eD.userCode})]}),(0,a.jsxs)("a",{href:eD.verificationUriComplete,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 px-4 rounded-lg bg-gradient-to-r from-[#FF9900] to-[#ec7211] text-white text-center font-semibold hover:opacity-90 transition-opacity",children:[(0,a.jsx)(d,{className:"w-4 h-4 inline mr-2"}),"点击打开授权页面"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-1"}),"请在 ",(0,a.jsxs)("span",{className:"font-bold text-white",children:[Math.floor(eD.expiresIn/60)," 分钟"]}),"内完成授权"]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-white/5 flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-green-400"}),"系统正在后台轮询授权状态，完成授权后将自动保存 token..."]})]}),!eD&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"授权步骤："}),(0,a.jsxs)("ol",{className:"text-sm text-gray-400 space-y-1 list-decimal list-inside",children:[(0,a.jsx)("li",{children:'点击下方"开始设备授权"按钮'}),(0,a.jsx)("li",{children:"系统自动注册客户端并获取用户码"}),(0,a.jsx)("li",{children:"在弹出的验证链接中输入用户码"}),(0,a.jsx)("li",{children:"使用您的 AWS Builder ID 登录"}),(0,a.jsx)("li",{children:"授权成功后 token 自动保存"})]})]})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-white/10 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{eE(!1),eW(null)},className:"px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:"关闭"}),!eD&&(0,a.jsxs)("button",{onClick:eJ,disabled:$,className:"px-6 py-2 rounded-lg bg-[#FF9900] hover:bg-[#ec7211] font-semibold transition-all disabled:opacity-50 flex items-center gap-2",children:[$?(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(b,{className:"w-4 h-4"}),"开始设备授权"]})]})]})}),ea&&es&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-[fadeIn_0.2s_ease-out]",onClick:()=>er(!1),children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-white/10 max-w-lg w-full overflow-hidden animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 text-blue-400"}),el," 授权 \xb7 账号 #",eM]}),(0,a.jsx)("button",{onClick:()=>er(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 font-medium mb-1",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"使用无痕模式登录不同账号"]}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs",children:["Chrome/Edge: ",(0,a.jsx)("kbd",{className:"bg-white/10 px-1 rounded",children:"Ctrl+Shift+N"})," \xb7 Firefox: ",(0,a.jsx)("kbd",{className:"bg-white/10 px-1 rounded",children:"Ctrl+Shift+P"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"授权链接："}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",readOnly:!0,value:es,className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-xs font-mono text-green-400 truncate"}),(0,a.jsx)("button",{onClick:()=>{es&&(navigator.clipboard.writeText(es),F.success("已复制","请在无痕模式中打开此链接"))},className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors",title:"复制链接",children:(0,a.jsx)(w,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-green-500/10 border border-green-500/30 flex items-center gap-2 text-sm",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 animate-spin text-green-400"}),(0,a.jsx)("span",{className:"text-green-400",children:"正在自动检测授权完成状态..."})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-white/10 flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{es&&(navigator.clipboard.writeText(es),F.success("链接已复制！","请打开无痕模式 (Ctrl+Shift+N) 粘贴访问"))},className:"flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 font-medium transition-all flex items-center justify-center gap-2",children:[(0,a.jsx)(w,{className:"w-4 h-4"}),"复制到无痕"]}),(0,a.jsxs)("button",{onClick:()=>{es&&window.open(es,"_blank")},className:"px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors flex items-center gap-2",children:[(0,a.jsx)(k,{className:"w-4 h-4"}),"打开"]}),(0,a.jsx)("button",{onClick:()=>er(!1),className:"px-4 py-2 rounded-lg border border-white/10 hover:bg-white/5 transition-colors",children:"关闭"})]})]})})]})}},1695:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3243).Z)("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]])},9740:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3243).Z)("outline","eye","Eye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]])},1865:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3243).Z)("outline","eye-off","EyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]])},2877:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3243).Z)("outline","key","Key",[["path",{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z",key:"svg-0"}],["path",{d:"M15 9h.01",key:"svg-1"}]])},2596:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3243).Z)("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])}},function(e){e.O(0,[582,29,976,971,117,744],function(){return e(e.s=7675)}),_N_E=e.O()}]);