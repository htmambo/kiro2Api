(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{7246:function(e,t,a){Promise.resolve().then(a.bind(a,1027))},1027:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(7437),r=a(2265),n=a(9376),o=a(7648),l=a(3145),i=a(3243);let c=(0,i.Z)("outline","chart-pie","ChartPie",[["path",{d:"M10 3.2a9 9 0 1 0 10.8 10.8a1 1 0 0 0 -1 -1h-6.8a2 2 0 0 1 -2 -2v-7a.9 .9 0 0 0 -1 -.8",key:"svg-0"}],["path",{d:"M15 3.5a9 9 0 0 1 5.5 5.5h-4.5a1 1 0 0 1 -1 -1v-4.5",key:"svg-1"}]]);var d=a(9043),u=a(9067),h=a(2877),x=a(4746);let m=(0,i.Z)("outline","terminal","Terminal",[["path",{d:"M5 7l5 5l-5 5",key:"svg-0"}],["path",{d:"M12 19l7 0",key:"svg-1"}]]),f=(0,i.Z)("outline","logout","Logout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]);var g=a(3149),v=a(1343);let b=[{href:"/dashboard",icon:c,label:"仪表盘"},{href:"/dashboard/config",icon:d.Z,label:"配置管理"},{href:"/dashboard/providers",icon:u.Z,label:"号池管理"},{href:"/dashboard/credentials",icon:h.Z,label:"凭据文件"},{href:"/dashboard/usage",icon:x.Z,label:"用量统计"},{href:"/dashboard/logs",icon:m,label:"运行日志"}];function p(){let e=(0,g.p)();return(0,r.useEffect)(()=>(0,v.gD)(()=>{e.error("登录已过期，请重新登录")}),[e]),null}function y(e){let{children:t}=e,a=(0,n.useRouter)(),i=(0,n.usePathname)(),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{localStorage.getItem("authToken")?d(!0):a.push("/login")},[a]),c)?(0,s.jsxs)(g.V,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)("div",{className:"min-h-screen text-white",style:{backgroundColor:"var(--fitness-bg)"},children:[(0,s.jsx)("header",{className:"border-b sticky top-0 z-50",style:{borderColor:"var(--fitness-border)",backgroundColor:"var(--fitness-bg)"},children:(0,s.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.default,{src:"/logo.png",alt:"Kiro2API Logo",width:40,height:40,className:"drop-shadow-md"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold tracking-tight text-white",children:"Kiro2API"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"AI Proxy Dashboard"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{className:"w-9 h-9 rounded-lg flex items-center justify-center text-gray-500 hover:text-gray-300 hover:bg-white/[0.05] ease-smooth transition-all duration-200",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,s.jsx)("button",{className:"w-9 h-9 rounded-lg flex items-center justify-center text-gray-500 hover:text-gray-300 hover:bg-white/[0.05] ease-smooth transition-all duration-200",children:(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("aside",{className:"w-64 border-r h-[calc(100vh-73px)] sticky top-[73px] flex flex-col overflow-y-auto",style:{borderColor:"var(--fitness-border)",backgroundColor:"var(--fitness-bg)"},children:(0,s.jsxs)("div",{className:"flex-1 p-5",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1 animate-slide-in-left delay-100",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"主菜单"}),(0,s.jsx)("button",{className:"w-5 h-5 text-gray-700 hover:text-gray-500 ease-smooth transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),(0,s.jsx)("nav",{className:"space-y-1",children:b.map((e,t)=>{let a=e.icon,r=i===e.href;return(0,s.jsxs)(o.default,{href:e.href,className:"group relative flex items-center gap-3 px-3 py-2.5 rounded-xl ease-smooth transition-all duration-200 animate-slide-in-left ".concat(r?"text-white":"text-gray-500 hover:text-gray-300"),style:{animationDelay:"".concat((t+2)*50,"ms")},children:[r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl blur-md opacity-30",style:{backgroundColor:"var(--fitness-accent)"}}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3), inset 0 -1px 2px rgba(255, 255, 255, 0.05)"}}),(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-px rounded-t-xl opacity-30",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}})]}),!r&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-xl bg-white/0 group-hover:bg-white/[0.03] ease-smooth transition-all duration-200"}),(0,s.jsx)(a,{className:"w-5 h-5 relative z-10 ease-smooth transition-all duration-200 group-hover:scale-105",style:r?{strokeWidth:2.5}:{strokeWidth:2}}),(0,s.jsx)("span",{className:"relative z-10 font-medium text-sm",children:e.label})]},e.href)})})]}),(0,s.jsxs)("div",{className:"animate-slide-in-left delay-500",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider mb-3 px-1",children:"设置与帮助"}),(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("authToken"),a.push("/login")},className:"w-full group flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-500 hover:text-gray-300 ease-smooth transition-all duration-200 hover:bg-white/[0.03] relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-lg bg-white/0 group-hover:bg-white/[0.03] ease-smooth transition-all duration-200"}),(0,s.jsx)(f,{className:"w-5 h-5 relative z-10 ease-smooth transition-transform duration-200 group-hover:rotate-12",style:{strokeWidth:2}}),(0,s.jsx)("span",{className:"relative z-10 font-medium text-sm",children:"登出"})]})]})]})}),(0,s.jsx)("main",{className:"flex-1 p-6 min-h-[calc(100vh-73px)]",children:t})]})]})]}):null}},3149:function(e,t,a){"use strict";a.d(t,{V:function(){return x},p:function(){return h}});var s=a(7437),r=a(29),n=a.n(r),o=a(2265),l=a(6393),i=a(1443),c=a(7406);let d=(0,a(3243).Z)("outline","info-circle","InfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]),u=(0,o.createContext)(null);function h(){let e=(0,o.useContext)(u);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function x(e){let{children:t}=e,[a,r]=(0,o.useState)([]),n=(0,o.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),l=(0,o.useCallback)(function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3,o=Math.random().toString(36).substring(2,9);r(r=>[...r,{id:o,type:e,title:t,message:a,duration:s}]),s>0&&setTimeout(()=>n(o),s)},[n]),i=(0,o.useCallback)((e,t)=>l("success",e,t),[l]),c=(0,o.useCallback)((e,t)=>l("error",e,t,5e3),[l]),d=(0,o.useCallback)((e,t)=>l("warning",e,t,4e3),[l]),h=(0,o.useCallback)((e,t)=>l("info",e,t),[l]);return(0,s.jsxs)(u.Provider,{value:{showToast:l,success:i,error:c,warning:d,info:h},children:[t,(0,s.jsx)(m,{toasts:a,onRemove:n})]})}function m(e){let{toasts:t,onRemove:a}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 max-w-sm w-full pointer-events-none",children:t.map(e=>(0,s.jsx)(f,{toast:e,onRemove:a},e.id))})}function f(e){let{toast:t,onRemove:a}=e,[r,u]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{requestAnimationFrame(()=>u(!0))},[]);let m={success:(0,s.jsx)(l.Z,{className:"w-5 h-5"}),error:(0,s.jsx)(i.Z,{className:"w-5 h-5"}),warning:(0,s.jsx)(c.Z,{className:"w-5 h-5"}),info:(0,s.jsx)(d,{className:"w-5 h-5"})},f={success:"from-green-500 to-emerald-600",error:"from-red-500 to-rose-600",warning:"from-orange-500 to-amber-600",info:"from-blue-500 to-purple-600"};return(0,s.jsxs)("div",{className:"jsx-e43ea6c4bca847b0 "+"\n        pointer-events-auto\n        transform transition-all duration-300 ease-out\n        ".concat(r&&!h?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n      "),children:[(0,s.jsxs)("div",{className:"jsx-e43ea6c4bca847b0 "+"\n        relative overflow-hidden rounded-xl border backdrop-blur-xl\n        ".concat({success:"bg-green-500/10 border-green-500/20",error:"bg-red-500/10 border-red-500/20",warning:"bg-orange-500/10 border-orange-500/20",info:"bg-blue-500/10 border-blue-500/20"}[t.type],"\n        shadow-2xl shadow-black/20\n      "),children:[(0,s.jsx)("div",{className:"jsx-e43ea6c4bca847b0 "+"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b ".concat(f[t.type])}),(0,s.jsxs)("div",{className:"jsx-e43ea6c4bca847b0 flex items-start gap-3 p-4 pl-5",children:[(0,s.jsx)("div",{className:"jsx-e43ea6c4bca847b0 "+"\n            flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center\n            bg-gradient-to-br ".concat(f[t.type]," text-white\n          "),children:m[t.type]}),(0,s.jsxs)("div",{className:"jsx-e43ea6c4bca847b0 flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"jsx-e43ea6c4bca847b0 font-semibold text-white text-sm",children:t.title}),t.message&&(0,s.jsx)("p",{className:"jsx-e43ea6c4bca847b0 mt-1 text-sm text-gray-400 break-words",children:t.message})]}),(0,s.jsx)("button",{onClick:()=>{x(!0),setTimeout(()=>a(t.id),300)},className:"jsx-e43ea6c4bca847b0 flex-shrink-0 p-1 rounded-lg hover:bg-white/10 transition-colors text-gray-400 hover:text-white",children:(0,s.jsx)(i.Z,{className:"w-4 h-4"})})]}),t.duration&&t.duration>0&&(0,s.jsx)("div",{className:"jsx-e43ea6c4bca847b0 h-0.5 bg-white/5",children:(0,s.jsx)("div",{style:{animation:"shrink ".concat(t.duration,"ms linear forwards")},className:"jsx-e43ea6c4bca847b0 "+"h-full bg-gradient-to-r ".concat(f[t.type])})})]}),(0,s.jsx)(n(),{id:"e43ea6c4bca847b0",children:"@-webkit-keyframes shrink{from{width:100%}to{width:0%}}@-moz-keyframes shrink{from{width:100%}to{width:0%}}@-o-keyframes shrink{from{width:100%}to{width:0%}}@keyframes shrink{from{width:100%}to{width:0%}}"})]})}},1343:function(e,t,a){"use strict";a.d(t,{TW:function(){return c},gD:function(){return o},ri:function(){return d}});class s extends Error{constructor(e="Unauthorized"){super(e),this.name="UnauthorizedError",Object.setPrototypeOf(this,s.prototype)}}let r=null,n=null;function o(e){return r=e,()=>{r===e&&(r=null)}}async function l(e){if(!function(e){let t=e.headers.get("content-type");return null!==t&&t.toLowerCase().includes("application/json")}(e))return null;try{return await e.clone().json()}catch(e){return null}}async function i(){if(null!==n){await n;return}n=(async()=>{try{localStorage.removeItem("authToken"),null!==r&&await Promise.resolve(r()),window.location.replace("/login.html")}catch(e){console.error("Error during unauthorized flow:",e),window.location.replace("/login.html")}})().finally(()=>{n=null}),await n}function c(e){return e instanceof s}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new Headers(t.headers),r=localStorage.getItem("authToken");null===r||a.has("Authorization")||a.set("Authorization","Bearer ".concat(r));let n=await fetch(e,{...t,headers:a});if(401===n.status)throw await i(),new s("HTTP 401 Unauthorized");let o=await l(n);if(o&&"UNAUTHORIZED"===o.code)throw await i(),new s("API returned UNAUTHORIZED code");return n}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},7406:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","alert-triangle","AlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},4746:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","chart-line","ChartLine",[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]])},6393:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]])},2877:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","key","Key",[["path",{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z",key:"svg-0"}],["path",{d:"M15 9h.01",key:"svg-1"}]])},9067:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","server","Server",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]])},9043:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","settings","Settings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]])},1443:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3243).Z)("outline","x","X",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]])}},function(e){e.O(0,[29,197,648,971,117,744],function(){return e(e.s=7246)}),_N_E=e.O()}]);